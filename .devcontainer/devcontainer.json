{
	"name": "Aerial Gym",
	"build": {
		"dockerfile": "Dockerfile",
		"context": "..",
		"args": {
			"USERNAME": "${localEnv:USER:devuser}",
			"USER_UID": "${localEnv:UID:1000}",
			"USER_GID": "${localEnv:GID:1000}"
		}
	},

	"remoteUser": "${localEnv:USER:devuser}",

	"runArgs": [
		"--gpus=all",
		"--ipc=host",
		"--ulimit", "memlock=-1",
		"--ulimit", "stack=67108864",
		"--device=/dev/dri",
		"--network=host"
	],

	"containerEnv": {
		"DISPLAY": "${localEnv:DISPLAY}",
		"QT_X11_NO_MITSHM": "1",
		"NVIDIA_VISIBLE_DEVICES": "all",
		"NVIDIA_DRIVER_CAPABILITIES": "all"
	},

	"mounts": [
		"source=/tmp/.X11-unix,target=/tmp/.X11-unix,type=bind,consistency=cached",
		"source=${localEnv:HOME}/.Xauthority,target=/home/${localEnv:USER}/.Xauthority,type=bind,readonly",
		"source=${localEnv:HOME}/.claude,target=${localEnv:HOME}/.claude,type=bind",
		"source=${localEnv:HOME}/DATA,target=${localEnv:HOME}/DATA,type=bind"
	],

	"initializeCommand": "xhost +local:docker",

	"customizations": {
		"vscode": {
			"extensions": [
				"ms-python.python",
				"ms-python.vscode-pylance"
			]
		}
	},
	"postCreateCommand": "curl -fsSL https://claude.ai/install.sh | bash && echo 'export PATH=\"$HOME/.local/bin:$PATH\"' >> ~/.bashrc && source ~/.bashrc"
}
